@page "/auth/signup"

<PageTitle>Sign Up</PageTitle>

<MudText Align="Align.Center">Please enter the bottom information to create an account!</MudText>

<MudGrid Justify="Justify.Center">
    <MudItem xs="5">
        <MudPaper Class="pa-4">
                <MudForm @ref="signup" @bind-IsValid="@success" @bind-Errors="@errors">
                    <MudTextField T="string" Label="First Name" @ref="firstName" Required="true" RequiredError="Must enter your first name"
                        Validation="@(new Func<string, string>(FirstLastName))" OnlyValidateIfDirty="true" />

                <MudTextField T="string" Label="Last Name" @ref="lastName" Required="true" RequiredError="Must enter your last name"
                              Validation="@(new Func<string, string>(FirstLastName))" OnlyValidateIfDirty="true" />

                <MudTextField T="string" Label="Email" @ref="email" Required="true" RequiredError="Must enter an email"
                              OnlyValidateIfDirty="true" />

                <MudTextField T="string" Label="Phone Number" @ref="phoneNumber" Required="true" RequiredError="Must enter your Phone Number"
                              OnlyValidateIfDirty="true" />

                <!-- Need to add validation to the email and phone number fields -->

                <MudTextField T="string" Label="Employee ID" @ref="employeeID" Required="true" RequiredError="Must enter your EmployeeID"
                              Validation="@(new Func<string, string>(EmployeeID))" OnlyValidateIfDirty="true" />

                <!-- 
                    All of the text fields that will be needed for an employee to sign up.
                    Explanations of the MedTextFields are in Authentication.razor
                -->

                <MudButton Variant="Variant.Filled" Color="Color.Success" Disabled="@(!success)" Class="m1-auto" OnClick="Testing">Register</MudButton>
                <!--
                    Button to test assignment of values from the MudTextFields to the variables defined in the code section below.
                    Calls the method Testing below.
                -->
                </MudForm>
        </MudPaper>
    </MudItem>
    <MudItem xs="5">
        <MudPaper Class="pa-4 mud-height-full">
            <MudText Align="Align.Center">Some random text</MudText>
        </MudPaper>
    </MudItem>
</MudGrid>
<MudText Align="Align.Center">@test</MudText>

    @code {
    MudForm signup;
    bool success;
    string[] errors = { };
    string test = "hello";

    MudTextField<string> firstName;
    MudTextField<string> lastName;
    MudTextField<string> email;
    MudTextField<string> phoneNumber;
    MudTextField<string> employeeID;
    // All of the different text fields. Stores the values entered into these variables


    private string FirstLastName(String arg) // Method to validate the first and last name entered
    {
        if( string.IsNullOrWhiteSpace(arg))
        {
            return "You must enter something";
        }
        return null;
    }

    private string EmployeeID(string arg) // Method to validate that the user entered a valid EmployeeID
    {
        try
        {
            int.Parse(arg);
        }
        catch(Exception ex)
        {
            return "You must enter a valid Employee ID";
        }

        return null;
    }

    private void Testing() // Simply prints out the values from the text fields
    {
        test = "Full Name: " + firstName.Value + " " + lastName.Value + "\nEmail: " + email.Value 
        + "\nPhone Number:" + phoneNumber.Value + "\nEmployee ID: " + employeeID.Value;
    }
}
